webpackJsonp([9],{GnUR:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("Izdj"),a=o("wWxp"),u=o("aYpo"),i=o("R2SV"),n={name:"editProductMsg",mixins:[r.a],components:{VueEditor:u.VueEditor},data:function(){return{tableTitle:"",form:{},rules:{languageType:[{required:!0,message:"请选择语言",trigger:"blur"}],productBackground:[{required:!0,message:"请选择图片"}],productTitle:[{required:!0,message:"请输入标题",trigger:"blur"}],title:[{required:!0,message:"请输入产品系列标题",trigger:"blur"}],introduce:[{required:!0,message:"请输入产品介绍",trigger:"blur"}],productContent:[{required:!0,message:"请输入内容",trigger:"blur"}],productMainPhoto:[{required:!0,message:"请选择图片"}]},languageList:[],productBackground:[],productMainPhoto:[]}},methods:{getSingleData:function(t){var e=this;a.q.updateData({id:t}).then(function(o){e.productBackground.push({url:o.body.kubNavigatHome.productBackground}),e.productMainPhoto.push({url:o.body.kubNavigatHome.productMainPhoto}),e.$set(e.form,"languageType",o.body.kubNavigatHome.languageType),e.$set(e.form,"productBackground",o.body.kubNavigatHome.productBackground),e.$set(e.form,"productTitle",o.body.kubNavigatHome.productTitle),e.$set(e.form,"productContent",o.body.kubNavigatHome.productContent),e.$set(e.form,"productMainPhoto",o.body.kubNavigatHome.productMainPhoto),e.$set(e.form,"title",o.body.kubNavigatHome.title),e.$set(e.form,"introduce",o.body.kubNavigatHome.introduce),e.$set(e.form,"id",t)})},uploadSuccess:function(t,e,o,r){this.$set(this.form,r,t)},uploadRemove:function(t,e,o){this.$set(this.form,o,[])},onSubmit:function(t){var e=this;this.$refs[t].validate(function(o){if(!o)return e.$message.warning("保存失败，请填写完整信息！"),!1;a.q.saveData(e.form).then(function(o){Object(i.b)(e.$route.query.title),o.success&&(e.$refs[t].resetFields(),e.productBackground=[],e.productMainPhoto=[],e.$router.push({path:"/productManage"}))})})},backHomeManage:function(t){this.form={},this.productBackground=[],this.productMainPhoto=[],this.$refs[t].resetFields(),this.$router.push({path:"/productManage"})}},created:function(){this.tableTitle=this.$route.query.title+"数据"},activated:function(){this.$route.query.id?this.getSingleData(this.$route.query.id):(this.form={},this.productBackground=[],this.productMainPhoto=[])}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"edit_message"},[o("c-breadcrumb",{attrs:{tableTitle:t.tableTitle}}),t._v(" "),o("div",{staticClass:"container"},[o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",staticStyle:{width:"900px"},attrs:{model:t.form,"label-width":"130px",rules:t.rules}},[o("el-form-item",{attrs:{label:"语言类型：",prop:"languageType"}},[o("el-select",{attrs:{placeholder:"请选择语言"},model:{value:t.form.languageType,callback:function(e){t.$set(t.form,"languageType",e)},expression:"form.languageType"}},t._l(t.languageList,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"产品系列标题：",prop:"title"}},[o("el-input",{attrs:{placeholder:"请输入产品系列标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"背景图：",prop:"productBackground"}},[o("c-upload",{attrs:{fileList:t.productBackground,imageName:"productBackground"},on:{"on-success":t.uploadSuccess,"on-remove":t.uploadRemove}})],1),t._v(" "),o("el-form-item",{attrs:{label:"主图：",prop:"productMainPhoto"}},[o("c-upload",{attrs:{fileList:t.productMainPhoto,imageName:"productMainPhoto"},on:{"on-success":t.uploadSuccess,"on-remove":t.uploadRemove}})],1),t._v(" "),o("el-form-item",{attrs:{label:"标题：",prop:"productTitle"}},[o("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.productTitle,callback:function(e){t.$set(t.form,"productTitle",e)},expression:"form.productTitle"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"产品介绍：",prop:"introduce"}},[o("el-input",{attrs:{placeholder:"请输入产品介绍"},model:{value:t.form.introduce,callback:function(e){t.$set(t.form,"introduce",e)},expression:"form.introduce"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"内容：",prop:"productContent"}},[o("vue-editor",{attrs:{name:"imageContent",useCustomImageHandler:""},on:{imageAdded:t.handleImageAdded},model:{value:t.form.productContent,callback:function(e){t.$set(t.form,"productContent",e)},expression:"form.productContent"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("form")}}},[t._v("保存")]),t._v(" "),o("el-button",{on:{click:function(e){t.backHomeManage("form")}}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]},s=o("VU/8")(n,l,!1,null,null,null);e.default=s.exports}});
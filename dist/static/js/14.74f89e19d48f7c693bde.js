webpackJsonp([14],{CU7c:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("Izdj"),u=o("wWxp"),r=o("aYpo"),s=o("R2SV"),n={name:"editHomeMsg",mixins:[a.a],components:{VueEditor:r.VueEditor},data:function(){return{tableTitle:"",form:{},rules:{languageType:[{required:!0,message:"请选择语言",trigger:"blur"}],kubBackground:[{required:!0,message:"请选择图片"}],kubTitleHeader:[{required:!0,message:"请输入标题头"}],kubTitle:[{required:!0,message:"请输入标题"}],kubContent:[{required:!0,message:"请输入内容"}],kubDetailsBackground:[{required:!0,message:"请选择图片"}],kubDetailsContent:[{required:!0,message:"请输入内容"}],boosIntroduce:[{required:!0,message:"请输入内容"}],boosPhoto:[{required:!0,message:"请选择图片"}]},languageList:[],kubBackground:[],kubDetailsBackground:[],boosPhoto:[]}},methods:{getSingleData:function(e){var t=this;u.n.updateData({id:e}).then(function(o){t.kubBackground.push({url:o.body.kubNavigatHome.kubBackground}),t.kubDetailsBackground.push({url:o.body.kubNavigatHome.kubDetailsBackground}),t.boosPhoto.push({url:o.body.kubNavigatHome.boosPhoto}),t.$set(t.form,"languageType",o.body.kubNavigatHome.languageType),t.$set(t.form,"kubBackground",o.body.kubNavigatHome.kubBackground),t.$set(t.form,"kubTitleHeader",o.body.kubNavigatHome.kubTitleHeader),t.$set(t.form,"kubTitle",o.body.kubNavigatHome.kubTitle),t.$set(t.form,"kubContent",o.body.kubNavigatHome.kubContent),t.$set(t.form,"kubDetailsBackground",o.body.kubNavigatHome.kubDetailsBackground),t.$set(t.form,"kubDetailsContent",o.body.kubNavigatHome.kubDetailsContent),t.$set(t.form,"boosIntroduce",o.body.kubNavigatHome.boosIntroduce),t.$set(t.form,"boosPhoto",o.body.kubNavigatHome.boosPhoto),t.$set(t.form,"id",e)})},uploadSuccess:function(e,t,o,a){this.$set(this.form,a,e)},uploadRemove:function(e,t,o){this.$set(this.form,o,[])},onSubmit:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return t.$message.warning("保存失败，请填写完整信息！"),!1;u.n.saveData(t.form).then(function(o){Object(s.b)(t.$route.query.title),o.success&&(t.kubBackground=[],t.kubDetailsBackground=[],t.boosPhoto=[],t.$refs[e].resetFields(),t.$router.push({path:"/kubManage"}))})})},backHomeManage:function(e){this.form={},this.$refs[e].resetFields(),this.$router.push({path:"/kubManage"})}},created:function(){this.tableTitle=this.$route.query.title+"数据"},activated:function(){this.$route.query.id?this.getSingleData(this.$route.query.id):(this.form={},this.kubBackground=[],this.kubDetailsBackground=[],this.boosPhoto=[])}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"edit_home_message"},[o("c-breadcrumb",{attrs:{tableTitle:e.tableTitle}}),e._v(" "),o("div",{staticClass:"container"},[o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",staticStyle:{width:"900px"},attrs:{model:e.form,"label-width":"110px",rules:e.rules}},[o("el-form-item",{attrs:{label:"语言类型：",prop:"languageType"}},[o("el-select",{attrs:{placeholder:"请选择语言"},model:{value:e.form.languageType,callback:function(t){e.$set(e.form,"languageType",t)},expression:"form.languageType"}},e._l(e.languageList,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"背景图：",prop:"kubBackground"}},[o("c-upload",{attrs:{fileList:e.kubBackground,imageName:"kubBackground"},on:{"on-success":e.uploadSuccess,"on-remove":e.uploadRemove}})],1),e._v(" "),o("el-form-item",{attrs:{label:"标题头：",prop:"kubTitleHeader"}},[o("el-input",{attrs:{placeholder:"请输入标题头"},model:{value:e.form.kubTitleHeader,callback:function(t){e.$set(e.form,"kubTitleHeader",t)},expression:"form.kubTitleHeader"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"标题：",prop:"kubTitle"}},[o("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.kubTitle,callback:function(t){e.$set(e.form,"kubTitle",t)},expression:"form.kubTitle"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"内容：",prop:"kubContent"}},[o("vue-editor",{attrs:{name:"imageContent",useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.form.kubContent,callback:function(t){e.$set(e.form,"kubContent",t)},expression:"form.kubContent"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"详情背景图：",prop:"kubDetailsBackground"}},[o("c-upload",{attrs:{fileList:e.kubDetailsBackground,imageName:"kubDetailsBackground"},on:{"on-success":e.uploadSuccess,"on-remove":e.uploadRemove}})],1),e._v(" "),o("el-form-item",{attrs:{label:"详情内容：",prop:"kubDetailsContent"}},[o("vue-editor",{attrs:{name:"imageContent",useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.form.kubDetailsContent,callback:function(t){e.$set(e.form,"kubDetailsContent",t)},expression:"form.kubDetailsContent"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"老板照片：",prop:"boosPhoto"}},[o("c-upload",{attrs:{fileList:e.boosPhoto,imageName:"boosPhoto"},on:{"on-success":e.uploadSuccess,"on-remove":e.uploadRemove}})],1),e._v(" "),o("el-form-item",{attrs:{label:"老板介绍：",prop:"boosIntroduce"}},[o("vue-editor",{attrs:{name:"imageContent",useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.form.boosIntroduce,callback:function(t){e.$set(e.form,"boosIntroduce",t)},expression:"form.boosIntroduce"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("保存")]),e._v(" "),o("el-button",{on:{click:function(t){e.backHomeManage("form")}}},[e._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]},l=o("VU/8")(n,i,!1,null,null,null);t.default=l.exports}});
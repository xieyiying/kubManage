webpackJsonp([1],{"9bBU":function(e,t,o){o("mClu");var a=o("FeBl").Object;e.exports=function(e,t,o){return a.defineProperty(e,t,o)}},C4MV:function(e,t,o){e.exports={default:o("9bBU"),__esModule:!0}},bOdI:function(e,t,o){"use strict";t.__esModule=!0;var a,l=o("C4MV"),i=(a=l)&&a.__esModule?a:{default:a};t.default=function(e,t,o){return t in e?(0,i.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},mClu:function(e,t,o){var a=o("kM2E");a(a.S+a.F*!o("+E39"),"Object",{defineProperty:o("evD5").f})},xPaK:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("bOdI"),l=o.n(a),i=o("FxR9"),n=o("R2SV"),s=o("wWxp"),r={name:"homeManage",mixins:[o("Izdj").a],data:function(){var e,t=this;return e={tableObject:{data:[],column:i.c,buttons:[{text:"编辑",callback:function(e,o){t.getSingleData(o.id),t.title="编辑",t.editDialogShow=!0}},{text:"删除",type:"danger",callback:function(e,o){t.delDialogShow=!0,t.delId=o.id,t.delflag="single"}}]},totalPage:1,currentPage:1,delDialogShow:!1,delId:"",multipSelectId:"",delflag:"single",languageList:[],title:"",editDialogShow:!1,form:{},rules:{languageType:[{required:!0,message:"请选择语言",trigger:"blur"}],homePhoto:[{required:!0,message:"请选择图片"}],homeMail:[{required:!1,validator:function(e,t,o){t&&0==/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t)?o(new Error("请输入正确的邮箱格式！")):o()},trigger:"blur"}]}},l()(e,"languageList",[]),l()(e,"homePhoto",[]),e},methods:{getData:function(e){var t=this;s.m.getHomeData({pageNo:e,pageSize:10}).then(function(e){e.success&&(t.tableObject.data=e.body.list,t.totalPage=e.body.count)})},handleCurrentChange:function(e){this.currentPage=e,this.getData(this.currentPage)},handleAddMessage:function(){this.editDialogShow=!0,this.title="新增"},getSingleData:function(e){var t=this;s.m.updateHomeData({id:e}).then(function(o){t.homePhoto.push({url:o.body.kubNavigatHome.homePhoto}),t.$set(t.form,"languageType",o.body.kubNavigatHome.languageType),t.$set(t.form,"homeConten",o.body.kubNavigatHome.homeConten),t.$set(t.form,"homePhoto",o.body.kubNavigatHome.homePhoto),t.$set(t.form,"homeMail",o.body.kubNavigatHome.homeMail),t.$set(t.form,"id",e)})},uploadSuccess:function(e,t,o,a){this.$set(this.form,"homePhoto",e)},uploadRemove:function(e,t,o){this.$set(this.form,o,[])},onSubmit:function(){var e=this;s.m.saveHomeData(this.form).then(function(t){Object(n.b)(e.title),t.success&&(e.homePhoto=[],e.editDialogShow=!1,e.getData(e.currentPage))})},selectionChange:function(e){this.multipSelectId=e},handleDelAll:function(){this.delflag="multiple",this.delDialogShow=!0},handleDelete:function(){var e=this;Object(n.a)(this.delflag,s.m.deleteHomeData,{id:this.delId},s.m.batchDeleteHomeData,{ids:this.multipSelectId}).then(function(t){t.success&&(e.delDialogShow=!1,e.getData(e.currentPage))})},closeDialog:function(){this.delDialogShow=!1,this.editDialogShow=!1,this.form={},this.homePhoto=[]}},created:function(){this.getData(this.currentPage)}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"test"},[o("c-breadcrumb",{attrs:{tableTitle:"首页管理"}}),e._v(" "),o("div",{staticClass:"container"},[o("c-search",{on:{delAll:e.handleDelAll,addMessage:e.handleAddMessage}}),e._v(" "),o("c-table",{attrs:{tableObject:e.tableObject},on:{selectionChange:e.selectionChange}}),e._v(" "),o("c-pagination",{attrs:{totalPage:e.totalPage},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),o("c-dialog",{attrs:{title:"删除",show:e.delDialogShow},on:{"update:show":function(t){e.delDialogShow=t},confirm:e.handleDelete,closeDialog:e.closeDialog}}),e._v(" "),o("c-dialog",{attrs:{title:e.title,show:e.editDialogShow,callback:e.onSubmit,form:e.form,rules:e.rules,width:600},on:{"update:show":function(t){e.editDialogShow=t},closeDialog:e.closeDialog}},[o("el-form-item",{attrs:{label:"语言类型",prop:"languageType"}},[o("el-select",{attrs:{placeholder:"请选择语言"},model:{value:e.form.languageType,callback:function(t){e.$set(e.form,"languageType",t)},expression:"form.languageType"}},e._l(e.languageList,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"上传图片",prop:"homePhoto"}},[o("c-upload",{attrs:{fileList:e.homePhoto,imageName:"homePhoto"},on:{"on-success":e.uploadSuccess,"on-remove":e.uploadRemove}})],1),e._v(" "),o("el-form-item",{attrs:{label:"文字"}},[o("el-input",{attrs:{placeholder:"请输入文字"},model:{value:e.form.homeConten,callback:function(t){e.$set(e.form,"homeConten",t)},expression:"form.homeConten"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",prop:"homeMail"}},[o("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.homeMail,callback:function(t){e.$set(e.form,"homeMail",t)},expression:"form.homeMail"}})],1)],1)],1)},staticRenderFns:[]},c=o("VU/8")(r,u,!1,null,null,null);t.default=c.exports}});
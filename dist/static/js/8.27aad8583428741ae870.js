webpackJsonp([8],{"+/AE":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("ifoU"),l=a.n(o),r=a("FxR9"),i=a("R2SV"),n=a("wWxp"),u={name:"productDetialManage",mixins:[a("Izdj").a],data:function(){var e=this;return{tableObject:{data:[],column:r.h,buttons:[{text:"编辑",callback:function(t,a){e.title="编辑",e.editDialogShow=!0,e.getSingleData(a.id)}},{text:"删除",type:"danger",callback:function(t,a){e.delDialogShow=!0,e.delId=a.id,e.delflag="single"}}]},totalPage:1,currentPage:1,delDialogShow:!1,delId:"",multipSelectId:"",delflag:"single",languageList:[],title:"",editDialogShow:!1,form:{},rules:{languageType:[{required:!0,message:"请选择语言",trigger:"blur"}],productId:[{required:!0,message:"请选择类型",trigger:"blur"}],productPhoto:[{required:!0,message:"请选择图片"}],productName:[{required:!0,message:"请输入产品名称",trigger:"blur"}],productUrl:[{required:!0,message:"请输入产品链接",trigger:"blur"}]},productTypeList:[],productPhoto:[],productType:new l.a([["1",["孕产系列"]],["2",["童装系列"]],["3",["安防系列"]],["4",["出行系列"]],["5",["用品系列"]],["6",["喂哺系列"]],["7",["玩教系列"]],["8",["睡眠系列"]],["default",[""]]])}},methods:{getData:function(e){var t=this;n.p.getListData({pageNo:e,pageSize:10}).then(function(e){e.success&&(e.body.list.forEach(function(e){var a=t.productType.get(e.productId)||t.productType.get("default");e.productId=a[0]}),t.tableObject.data=e.body.list,t.totalPage=e.body.count)})},handleCurrentChange:function(e){this.currentPage=e,this.getData(this.currentPage)},languageChange:function(e){var t=this;n.p.getProductType({languageType:e}).then(function(e){t.productTypeList=e})},getSingleData:function(e){var t=this;n.p.updateData({id:e}).then(function(a){t.productPhoto.push({url:a.body.kubNavigatHome.productPhoto}),t.$set(t.form,"languageType",a.body.kubNavigatHome.languageType),t.$set(t.form,"productId",a.body.kubNavigatHome.productId),t.$set(t.form,"productPhoto",a.body.kubNavigatHome.productPhoto),t.$set(t.form,"productName",a.body.kubNavigatHome.productName),t.$set(t.form,"productUrl",a.body.kubNavigatHome.productUrl),t.$set(t.form,"id",e)})},handleAddMessage:function(){this.title="新增",this.editDialogShow=!0},handleSave:function(){var e=this;n.p.saveData(this.form).then(function(t){Object(i.b)(e.title),t.success&&(e.productPhoto=[],e.editDialogShow=!1,e.getData(e.currentPage))})},uploadSuccess:function(e,t,a,o){this.$set(this.form,o,e)},uploadRemove:function(e,t,a){this.$set(this.form,a,[])},selectionChange:function(e){this.multipSelectId=e},handleDelAll:function(){this.delflag="multiple",this.delDialogShow=!0},handleDelete:function(){var e=this;Object(i.a)(this.delflag,n.p.deleteData,{id:this.delId},n.p.batchDeleteData,{ids:this.multipSelectId}).then(function(t){t.success&&(e.delDialogShow=!1,e.getData(e.currentPage))})},closeDialog:function(){this.delDialogShow=!1,this.editDialogShow=!1,this.form={},this.productPhoto=[]}},created:function(){this.getData(this.currentPage)}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"test"},[a("c-breadcrumb",{attrs:{tableTitle:"产品详情管理"}}),e._v(" "),a("div",{staticClass:"container"},[a("c-search",{on:{delAll:e.handleDelAll,addMessage:e.handleAddMessage}}),e._v(" "),a("c-table",{attrs:{tableObject:e.tableObject},on:{selectionChange:e.selectionChange}}),e._v(" "),a("c-pagination",{attrs:{totalPage:e.totalPage},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("c-dialog",{attrs:{title:"删除",show:e.delDialogShow},on:{"update:show":function(t){e.delDialogShow=t},confirm:e.handleDelete,closeDialog:e.closeDialog}}),e._v(" "),a("c-dialog",{attrs:{title:e.title,show:e.editDialogShow,callback:e.handleSave,form:e.form,rules:e.rules,width:600},on:{"update:show":function(t){e.editDialogShow=t},closeDialog:e.closeDialog}},[a("el-form-item",{attrs:{label:"语言类型",prop:"languageType"}},[a("el-select",{attrs:{placeholder:"请选择语言"},on:{change:e.languageChange},model:{value:e.form.languageType,callback:function(t){e.$set(e.form,"languageType",t)},expression:"form.languageType"}},e._l(e.languageList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"产品类型",prop:"productId"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.form.productId,callback:function(t){e.$set(e.form,"productId",t)},expression:"form.productId"}},e._l(e.productTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.productTitle,value:e.id}})})),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("(注意：请先选择语言类型！)")])],1),e._v(" "),a("el-form-item",{attrs:{label:"产品图片",prop:"productPhoto"}},[a("c-upload",{attrs:{fileList:e.productPhoto,imageName:"productPhoto"},on:{"on-success":e.uploadSuccess,"on-remove":e.uploadRemove}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:e.form.productName,callback:function(t){e.$set(e.form,"productName",t)},expression:"form.productName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品链接",prop:"productUrl"}},[a("el-input",{attrs:{placeholder:"请输入产品链接"},model:{value:e.form.productUrl,callback:function(t){e.$set(e.form,"productUrl",t)},expression:"form.productUrl"}})],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(u,c,!1,null,null,null);t.default=d.exports}});